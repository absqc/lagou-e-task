## 简答题

#### 谈谈你是如何理解 JS 异步编程的，EventLoop、消息队列都是做什么的，什么是宏任务，什么是微任务？

**答:JS是单线程的，在执行过程中正常是从上往下将代码放入调用栈中顺序执行的，当碰到异步代码的时候，会交给异步线程去处理，当符合条件的时候，就会将异步代码中的回调函数放进消息队列（用来存放将要执行的异步任务，新添加的任务添加到队列的尾部，取出任务的时候从队头开始取出）。当调用栈为空的时候，event loop 就会判断我们的消息队列是否为空，如果不为空，就从消息队列里面取出第一个任务压栈处理。上面的一轮过程就是一次调用执行，js不停循环这个过程就是 event loop**

**宏任务：像上面的消息队列可以理解为宏任务，通常宏任务有 setTimeout setInterval I/O事件 UI交互事件、script标签等**
**微任务：消息队列新的任务都会放到队列尾部，这时候一些优先级比较高的任务就没法优先执行，这时候就引入了微任务，常见的微任务包括了Promise.then mutationObserver Process.nextTick(Node.js)。**
**引入微任务后的执行机制：**
    **1.执行一个宏任务（栈中没有就从消息队列里取）**
    **2.执行过程中如果遇到微任务，就将微任务添加到微任务队列中**
    **3.当前宏任务执行完毕后，就一次执行微任务队列中的所有微任务**
    **4.重复上述的过程，直到执行栈和消息队列中都有没有任务为止**



